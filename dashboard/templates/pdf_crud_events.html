<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>LOGIN EVENTS RECORDS</title>
	<style>
		body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .report-header {
            text-align: center;
            margin-bottom: 40px;
        }
        .report-header h1 {
            margin: 0;
            font-size: 24px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .btn-info{
        	background-color: lightskyblue;
        }
        .btn-danger{
        	background-color: maroon;
        }
        .btn-success{
        	background-color: lightgreen;

        }
        button{
        	
        }
	</style>
</head>
<body>
	<div class="report-header">
        <h1> Audit Log  Report</h1>
    </div>
 
    <h2>CRUD Events List Table</h2>
  <table id="crud_events" class="table table-striped" style="width:100%">
              <thead>
                  <tr>
                  	<th>ID</th>
                      <th>Names</th>
                      
                      <th>Event Type</th>
                      <th>Content Type </th>
                      <th>Object </th>
                      <th>Changed fields</th>
                      <th>Date</th>
                      
                  </tr>
              </thead>
              <tbody>
                  {% for crud_event in crud_events %}

                  <tr>
                  	<td>{{crud_event.id}}</td>
                      <td>
                        {% if crud_event.user == 'ANONYMOUS' %}
                        System
                        {% else %}
                        {{crud_event.user.first_name}} {{crud_event.user.last_name}}
                        {% endif %}
                      </td>
                      
                      <td>{{crud_event.event_type}}</td>
                      <td>{{crud_event.content_type}}</td>
                      <td>{{crud_event.object}}</td>
                      <td>
                      	{% if crud_event.changed_fields == "null" or crud_event.changed_fields == None %}

                      		None
                      	{% else %}
                      		Yes
                      	{% endif %}

                      </td>
                      <td>{{crud_event.date}}</td>
                      
                  </tr>
                 {% endfor %}

              </tbody>
              <tfoot>
                  <tr>
                  		<th>ID</th>
                      <th>Names</th>
                      <th>Email</th>
                      <th>Event Type</th>
                      <th>Content Type </th>
                      <th>Object </th>
                      <th>Changed fields</th>
                      <th>Date</th>
                  </tr>
              </tfoot>
          </table>

            <h2>CRUD Event changes </h2>
           <table id="else" class="table table-striped" style="width:100%">
              <thead>
                  <tr>
                      <th>Event ID</th>
                      <th>Object </th>
                      <th>Field changed</th>
                      <th>Old value</th>
                      <th>current(new) value</th>
                      
                      
                  </tr>
              </thead>
              <tbody>
                  {% for crud_event in crud_events %}

                  	{% if crud_event.changed_fields == "null" or crud_event.changed_fields == None %}

                  	{% else %}
                  	
                  		{% for field, change in crud_event.changed_fields.items %}
                                        <tr>
                                        	<td>{{crud_event.id}}</td>
                                        	<td>{{crud_event.object}}</td>

                                            <td>{{ field }}</td>
                                            <td>{{ change.0 }}</td> <!-- old value -->
                                            <td>{{ change.1 }}</td> <!-- new value -->
                                        </tr>
                                    {% endfor %}
			        
			        {% endif %}
                 {% endfor %}

              </tbody>
              <tfoot>
                  <tr>
                      <th>Event ID</th>
                      <th>Object </th>
                      <th>Field changed</th>
                      <th>Old value</th>
                      <th>current(new) value</th>
                  </tr>
              </tfoot>
          </table>

</body>
</html>